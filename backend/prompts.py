"""
Default prompts for the agent
エージェントのデフォルトプロンプト定義
これらのプロンプトはUIから編集可能
"""

# デフォルトプロンプト定義
DEFAULT_PROMPTS = {
    "normalize": {
        "name": "正規化ノード",
        "description": "材料名の表記揺れを統一",
        "prompt": """（このノードはプロンプトを使用しません。材料名の正規化処理を行います）"""
    },

    "query_generation": {
        "name": "クエリ生成ノード",
        "description": "多角的な検索クエリを生成（ベテラン/新人/マネージャー視点）",
        "prompt": """# Role
あなたは生物・化学分野に精通したプロフェッショナルであり、高度な実験ノート検索エージェントです。

# Task
ユーザーの入力情報（目的、材料、方法、重点指示）を深く分析し、多様な視点から検索クエリを生成してください。

**重要な方針**:
1. **材料と方法**: 具体的な物質名や操作手順が含まれるため、キーワード性を重視してください。（Vector Search向けの要素）
2. **目的と重点指示**: 研究の背景や意図が含まれるため、意味的な内容（Semantic Search向けの要素）を重視してください。

# Input Data
[目的] {input_purpose}
[材料(正規化済)] {normalized_materials}
[方法] {input_methods}
[重点指示] {user_focus_instruction}

# 思考プロセス（出力不要）
1. **構造化**: 材料と方法から「物質・容量・動作」を抽出し、実験フローを理解する。
2. **意図解釈**: [目的]と[重点指示]から、ユーザーが真に知りたい「研究の意味」を特定する。
3. **ペルソナ展開**:
   - **ベテラン（原理・専門用語）**: 意味的な合致を重視。
   - **新人（具体的試薬・手順）**: キーワードの一致を重視。
   - **マネージャー（効率・目的達成）**: 全体プロセスの類似性を重視。

# 出力形式
最終的な**3つの異なる検索クエリ文字列のみ**を、以下の厳密なJSON形式で出力してください。

{{
  "queries": [
    "ベテラン視点の検索クエリ文字列",
    "新人視点の検索クエリ文字列",
    "マネージャー視点の検索クエリ文字列"
  ]
}}"""
    },

    "compare": {
        "name": "比較ノード",
        "description": "詳細な比較分析レポートを生成",
        "prompt": """あなたは優秀な研究アシスタントです。
以下の「ユーザーの実験計画」と「検索された過去の実験ノート」を詳細に比較してください。

# ユーザーの実験計画
[目的・背景] {input_purpose}
[材料(正規化済)] {normalized_materials}
[方法] {input_methods}
[重点指示] {user_focus_instruction}

# 検索された過去のノート
{retrieved_docs}

# 比較タスクのガイドライン
検索された各ノートについて、以下の観点で分析し、テーブルを作成してください。

1. **目的の比較 (Semantic Analysis)**:
   - 単語の一致ではなく、「研究の意図」「解決したい課題」「背景」が似ているかを**丁寧に**評価してください。
   - ユーザーの目的とノートの目的がどう関連しているか（例：同じ合成法だが対象が違う、目的は同じだがアプローチが違う等）を記述してください。

2. **材料・方法の比較 (Vector/Fact Analysis)**:
   - ここは**事実に基づいて厳密に**比較してください。
   - 物質名の表記揺れ（例：抗体Aと抗体a）は同一とみなして構いません。
   - 濃度や条件の違いがあれば具体的に指摘してください。

# 出力フォーマット (Markdown)

各ノートごとに以下の形式で出力してください。

## 実験ノート [ID] との比較

| 項目 | 入力計画 | 実験ノート [ID] | 分析・評価 |
| :--- | :--- | :--- | :--- |
| **目的・意図** | [入力の目的] | [ノートの目的] | **[ここを丁寧に記述]**<br>文脈や狙いの一致度、アプローチの差異について |
| **材料** | [主要な材料] | [主要な材料] | [一致・相違の具体的事実] |
| **方法・手順** | [主要な手順] | [主要な手順] | [条件・操作の差異] |

（重点指示がある場合、その観点での評価も「分析・評価」に含めてください）"""
    }
}


def get_default_prompt(prompt_type: str) -> str:
    """デフォルトプロンプトを取得"""
    if prompt_type in DEFAULT_PROMPTS:
        return DEFAULT_PROMPTS[prompt_type]["prompt"]
    return ""


def get_all_default_prompts() -> dict:
    """全デフォルトプロンプトを取得"""
    return DEFAULT_PROMPTS
