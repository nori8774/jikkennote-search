# タスクリスト: ノート管理改善（Phase 3）

## 概要

**機能名**: ノート管理改善
**作成日**: 2026-01-02
**関連要件**: FR-110（ノート取り込み改善）、FR-111（辞書自動抽出）

---

## タスク一覧

### FR-110: ノート取り込み改善

#### フロントエンド

- [x] components/FileDropZone.tsxを新規作成
- [x] FileDropZoneコンポーネントのドラッグ&ドロップ機能実装
- [x] FileDropZoneコンポーネントのバリデーション実装（.mdのみ）
- [x] FileDropZoneコンポーネントのビジュアルフィードバック実装
- [x] ingest/page.tsxにFileDropZoneを統合
- [x] 既存のinput type="file"をFileDropZoneで置き換え

#### バックエンド

- [x] ~~POST /upload/notesエンドポイント実装~~ (既に実装済み)

### FR-111: 辞書自動抽出（UIのみ）

- [x] ~~辞書自動抽出機能の実装~~ (既にLLMベースで実装済み)
- [ ] 分析中のプログレス表示改善（オプション）

### テスト・検証

- [x] 型チェック（npx tsc --noEmit）パス
- [ ] 手動テスト: ドラッグ&ドロップアップロード動作確認
- [ ] 手動テスト: 複数ファイル同時アップロード確認
- [ ] 手動テスト: 無効ファイル形式の拒否確認

---

## 進捗メモ

- FR-111（辞書自動抽出）はLLMベースで既に実装済みのため、UIのみが対象
- POST /upload/notesエンドポイントは既存のため新規実装不要
- 手動テスト項目は実機確認が必要なためチェック未完了

---

## 振り返り

**実装完了日**: 2026-01-02
**計画と実績の差分**:
- 計画: FR-110, FR-111の両方を実装
- 実績: FR-110（ドラッグ&ドロップUI）のみ実装。FR-111は既にLLMベースで実装済みだったため、プログレス表示改善のみがオプションとして残存

**学んだこと**:
1. ドラッグイベントの入れ子対応には`dragCounter`パターンが有効
2. 既存機能を事前調査することで重複実装を回避できた
3. 設計書に沿った実装でスペック準拠を確保できた

**次回への改善提案**:
1. ARIA属性の追加でアクセシビリティをさらに強化（role="button", tabIndex, aria-label等）
2. E2Eテスト（Playwright）でドラッグ&ドロップの自動テストを追加
3. ファイルサイズ制限の追加を検討（大容量ファイルのアップロード防止）

**検証結果**: 4.6/5（優秀）
- スペック準拠: 5/5
- コード品質: 5/5
- テストカバレッジ: 3/5（E2Eテスト未実装）
- セキュリティ: 5/5
- パフォーマンス: 5/5
