# 要件定義書: ノート管理改善（Phase 3）

## 概要

**機能名**: ノート管理改善
**作成日**: 2026-01-02
**関連要件**: FR-110（ノート取り込み改善）、FR-111（辞書自動抽出）

---

## 背景と目的

### 背景
- IT非専門者がノートをアップロードする際、現在の`<input type="file">`では直感的でない
- ドラッグ&ドロップによるファイルアップロードが一般的なUXパターン
- 辞書自動抽出はLLMベースで既に実装済みだが、UIの改善余地がある

### 目的
1. ドラッグ&ドロップによる直感的なファイルアップロードUIを提供
2. 既存の辞書自動抽出機能のUI/UXを改善

---

## 機能要件

### FR-110: ノート取り込み改善

#### FR-110.1: ドラッグ&ドロップUI
- **Must**: ブラウザ画面にファイルをドラッグ&ドロップでアップロード可能
- **Must**: 複数ファイル同時アップロード対応
- **Must**: .mdファイルのみ受け付ける（バリデーション）
- **Should**: ドロップ領域のビジュアルフィードバック（ホバー時のハイライト）
- **Should**: アップロード進捗表示
- **Could**: ファイルプレビュー機能

#### FR-110.2: 既存機能との統合
- **Must**: 既存の`<input type="file">`との共存（フォールバック）
- **Must**: アップロード後の自動取り込み提案
- **Must**: 取り込み結果の明確な表示

### FR-111: 辞書自動抽出（既存機能の改善）

**注**: 辞書自動抽出機能はLLMベースで既に実装済み。以下はUI改善のみ。

#### FR-111.1: 新出単語分析UIの改善
- **Should**: 分析中のプログレス表示
- **Should**: 結果のソート・フィルタ機能
- **Could**: バッチ処理対応（複数ノート一括分析）

---

## 非機能要件

- **パフォーマンス**: ファイルアップロード完了まで3秒以内（ローカル環境）
- **ユーザビリティ**: IT非専門者が自力でノート取り込み成功率 ≥ 90%
- **アクセシビリティ**: キーボード操作でもアップロード可能（フォールバック）

---

## 制約条件

1. **技術的制約**
   - Next.js 15 App Router環境
   - バックエンドAPI（`POST /upload/notes`）は既に存在
   - ローカルファイルシステムまたはGCS対応

2. **スコープ外**
   - Google Drive連携（Phase 4以降）
   - Sudachi形態素解析の導入（既存LLMベースで十分）

---

## 成功基準

- [ ] ブラウザから.mdファイルをドラッグ&ドロップでアップロード可能
- [ ] 複数ファイル同時アップロードが動作
- [ ] IT非専門者のノート取り込み成功率 ≥ 90%
- [ ] 型チェック（TypeScript）パス
- [ ] 既存E2Eテストに影響なし
